/*! angular-google-plus - v0.1.2 2015-03-13 */
angular.module("googleplus",[]).provider("GooglePlus",[function(){var a={};a.clientId=null,a.ignoreAuto=!1,a.cookiepolicy="single_host_origin",a.apiKey=null,a.scopes="https://www.googleapis.com/auth/plus.login",this.setClientId=function(b){return a.clientId=b,this},this.getClientId=function(){return a.clientId},this.setApiKey=function(b){return a.apiKey=b,this},this.getApiKey=function(){return a.apiKey},this.setScopes=function(b){return a.scopes=b,this},this.getScopes=function(){return a.scopes},this.init=function(b){angular.extend(a,b)},this.$get=["$q","$rootScope","$timeout","$window",function(b,c,d,e){var f,g=function(){};e.googlePlusHandleAuthResult=function(b){d(function(){if(b&&!b.error){if(a.ignoreAuto&&"AUTO"===b.status.method)return void gapi.auth.signOut();f.resolve(b)}else"user_signed_out"!==b.error&&f.reject("error")})};var h=!1;return g.prototype.isReady=function(){return h},g.prototype.setReady=function(a){h=a?!0:!1},g.prototype.login=function(){return f=b.defer(),gapi.auth.signIn({clientid:a.clientId,scope:a.scopes,cookiepolicy:a.cookiepolicy,callback:"googlePlusHandleAuthResult"}),f.promise},g.prototype.checkAuth=function(){return f=b.defer(),gapi.auth.authorize({client_id:a.clientId,scope:a.scopes,immediate:!0},e.googlePlusHandleAuthResult),f.promise},g.prototype.handleClientLoad=function(){gapi.client.setApiKey(a.apiKey),gapi.auth.init(function(){}),d(this.checkAuth,1)},g.prototype.getUser=function(){var a=b.defer();return gapi.client.load("oauth2","v2",function(){gapi.client.oauth2.userinfo.get().execute(function(b){a.resolve(b),c.$apply()})}),a.promise},g.prototype.getToken=function(){return gapi.auth.getToken()},g.prototype.setToken=function(a){return gapi.auth.setToken(a)},g.prototype.logout=function(){return f=b.defer(),gapi.auth.signOut(),f.promise},new g}]}]).run(["$window","$timeout","GooglePlus",function(a,b,c){a.ngGooglePlusLoaded=function(){b(function(){c.setReady(!0)})};var d=document.createElement("script");d.type="text/javascript",d.async=!0,d.src="https://apis.google.com/js/client.js?onload=ngGooglePlusLoaded";var e=document.getElementsByTagName("script")[0];e.parentNode.insertBefore(d,e)}]);